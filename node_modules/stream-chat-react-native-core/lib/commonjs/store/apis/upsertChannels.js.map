{"version":3,"names":["_upsertCidsForQuery","require","_upsertMembers","_upsertMessages","_upsertReads","_mapChannelDataToStorable","_QuickSqliteClient","_createUpsertQuery","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","upsertChannels","_ref","channels","filters","_ref$flush","flush","isLatestMessagesSet","sort","queries","channelIds","map","channel","cid","QuickSqliteClient","logger","concat","upsertCidsForQuery","cids","_iterator","_step","push","createUpsertQuery","mapChannelDataToStorable","members","messages","read","upsertMembers","upsertReads","reads","upsertMessages","executeSqlBatch","exports"],"sourceRoot":"../../../../src","sources":["store/apis/upsertChannels.ts"],"mappings":"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","ignoreList":[]}

{"version":3,"names":["_deleteChannel","require","_deleteMember","_deleteMessagesForChannel","_updateMessage","_upsertChannelData","_upsertChannelDataFromChannel","_upsertChannels","_upsertMembers","_upsertMessages","_upsertReads","_QuickSqliteClient","_createSelectQuery","handleEventToSyncDB","event","client","flush","type","queriesWithChannelGuard","createQueries","_event$channel","cid","channel","channels","QuickSqliteClient","executeSql","apply","createSelectQuery","length","channel_type","channel_id","undefined","initialized","disconnected","channelQuery","upsertChannelDataFromChannel","newQueries","concat","_toConsumableArray2","executeSqlBatch","console","warn","user","id","flushOverride","upsertReads","reads","last_read","received_at","unread_messages","message","parent_id","show_in_channel","upsertMessages","messages","updateMessage","reaction","upsertChannelData","deleteChannel","deleteMessagesForChannel","_event$queriedChannel","_event$queriedChannel2","queriedChannels","_event$queriedChannel3","_event$queriedChannel4","upsertChannels","isLatestMessagesSet","isLatestMessageSet","member","upsertMembers","members","deleteMember","exports"],"sourceRoot":"../../../../../src","sources":["components/Chat/hooks/handleEventToSyncDB.ts"],"mappings":"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","ignoreList":[]}
